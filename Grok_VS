apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: 000-sbi-maintenance-kill-all
  namespace: dev-istio-system
spec:
  gateways:
  - epay-dev-gateway
  hosts:
  - dev.epay.sbi
  - "*.dev.epay.sbi"
  exportTo:
  - "*"
  http:
  # 1. /ui  (no slash)
  - match:
    - uri:
        exact: /ui
    route:
    - destination:
        host: maintenancefe-maintenance-frontend.dev-frontend.svc.cluster.local
        port:
          number: 8080

  # 2. /ui/ (with slash) 
  - match:
    - uri:
        prefix: /ui/
    route:
    - destination:
        host: maintenancefe-maintenance-frontend.dev-frontend.svc.cluster.local
        port:
          number: 8080

  # 3. /demo
  - match:
    - uri:
        exact: /demo
    route:
    - destination:
        host: maintenancefe-maintenance-frontend.dev-frontend.svc.cluster.local
        port:
          number: 8080

  # 4. /demo/
  - match:
    - uri:
        prefix: /demo/
    route:
    - destination:
        host: maintenancefe-maintenance-frontend.dev-frontend.svc.cluster.local
        port:
          number: 8080

  # 5. Baki SAB KUCH (root + any other path)
  - match:
    - uri:
        prefix: /
    route:
    - destination:
        host: maintenancefe-maintenance-frontend.dev-frontend.svc.cluster.local
        port:
          number: 8080

[osuser@bastion ~]$ oc apply -f grook-vs.yaml
The VirtualService "zzz-global-maintenance-override" is invalid: spec.http[0].fault.abort.percentage: Invalid value: "integer": spec.http[0].fault.abort.percentage in body must be of type object: "integer"



[osuser@bastion ~]$ oc apply -f grook-vs.yaml
Error from server: error when creating "grook-vs.yaml": admission webhook "rev.validation.istio.io" denied the request: configuration is invalid: cannot have both public (*) and non-public exportTo values for a resource
